<!-- .slide: data-state="contrasted" -->
<h2 id="Single-component"><a href="#Single-component" class="headerlink" title="Single component"></a><strong>Single</strong> component</h2><p>@@@</p>
<h2 id="Immutable-build"><a href="#Immutable-build" class="headerlink" title="Immutable build"></a><strong>Immutable</strong> build</h2><pre><code class="bash">docker build -t oncletom/devcon-nodejs-app

Step 0 : FROM node:4-slim
 ---&gt; 81876916bca2
Step 1 : WORKDIR /app
 ---&gt; Using cache
 ---&gt; 44a4f0b3ef85
Step 2 : COPY package.json ./package.json
 ---&gt; Using cache
 ---&gt; 48cf3e569dc8
Step 3 : RUN npm install
...
</code></pre>
<p>@@@</p>
<h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><pre><code class="bash">docker run -ti oncletom/devcon-nodejs-app
</code></pre>
<p>@@@</p>
<h2 id="Explicit-behaviour"><a href="#Explicit-behaviour" class="headerlink" title="Explicit behaviour"></a><strong>Explicit</strong> behaviour</h2><p>Nothing happened unless <em>requested</em>.</p>
<p>@@@</p>
<h2 id="Port-binding-w-host"><a href="#Port-binding-w-host" class="headerlink" title="Port binding w/ host"></a>Port binding w/ <em>host</em></h2><pre><code class="bash"><span class="comment"># docker run -p [net-interface:host-port]:internal-port &lt;image&gt;</span>
docker run -ti -p 0.0.0.0:5000:3000 oncletom/devcon-nodejs-app
</code></pre>
<p>@@@</p>
<h2 id="Port-binding-w-containers"><a href="#Port-binding-w-containers" class="headerlink" title="Port binding w/ containers"></a>Port binding w/ <em>containers</em></h2><pre><code class="bash">docker run -d --name app oncletom/devcon-nodejs-app

docker run -ti --link <span class="string">"app:app_alias"</span> oncletom/devcon-nodejs-app &lt;<span class="built_in">command</span>&gt;
</code></pre>
<pre><code>
```
docker run -ti --link &quot;app:app_alias&quot; oncletom/devcon-nodejs-app env
docker run -ti --link &quot;app:app_alias&quot; oncletom/devcon-nodejs-app ping app_alias
docker run -ti --link &quot;app:app_alias&quot; oncletom/devcon-nodejs-app curl http://app:app_alias:3000
```


@@@

## **Runtime** configuration

```bash
docker run -e KEY_VALUE --env-file=.env-file &lt;container&gt;
```

```
# .env-file
NODE_ENV=test
DATABASE_URL=postgresql://host:port/db?pool=25
```

&lt;footer&gt;Think [Twelve-Factor](http://12factor.net/).&lt;/footer&gt;
</code></pre><pre><code>docker run -ti --rm -p 0.0.0.0:5000:3000 -e MOTD=&quot;Hello Devcon&quot; oncletom/devcon-nodejs-app
</code></pre><p>@@@</p>
<h2 id="Multiply"><a href="#Multiply" class="headerlink" title="Multiply!"></a>Multiply!</h2><pre><code class="bash">docker run -d -P oncletom/devcon-nodejs-app
docker run -d -P oncletom/devcon-nodejs-app
docker run -d -P oncletom/devcon-nodejs-app
docker run -d -P oncletom/devcon-nodejs-app
docker run -d -P oncletom/devcon-nodejs-app

<span class="comment"># â€¦</span>

docker ps
</code></pre>
<p>~~~~</p>
<pre><code>docker inspect -f &apos;{{range $p, $conf := .NetworkSettings.Ports}}{{(index $conf 0).HostPort}}{{end}}&apos; $(docker ps -q)
</code></pre>