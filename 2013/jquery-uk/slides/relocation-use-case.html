<h2 id="Tale-of-a-country-relocation"><a href="#Tale-of-a-country-relocation" class="headerlink" title="Tale of a country relocation"></a>Tale of a country relocation</h2><p>Let’s use another real life example <small>(that’s still better than <em>Hello world examples</em>)</small>.</p>
<ol>
<li>opening a bank account</li>
<li>finding a new place to live</li>
<li>request a NINo</li>
<li>ask for a debit card</li>
</ol>
<p>And hope for an on-time payday to finally live like a new settler!</p>
<p>@@@</p>
<h2 id="Opening-a-bank-account"><a href="#Opening-a-bank-account" class="headerlink" title="Opening a bank account"></a>Opening a bank account</h2><pre><code class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">requestBankAccount</span>(<span class="params">job, postal_address</span>)</span>{
  <span class="keyword">var</span> $deferred;

  <span class="comment">// expect an 'account' object to be resolved</span>
  $deferred = $.post(<span class="string">'http://bank.com/account'</span>, {
    job: job,
    address: postal_address
  });

  <span class="keyword">return</span> $deferred.promise();
}
</code></pre>
<p>@@@</p>
<h2 id="Assembling-the-workflow"><a href="#Assembling-the-workflow" class="headerlink" title="Assembling the workflow"></a>Assembling the workflow</h2><p>Let’s assume we have a <code>$job</code> promise available in the scope.</p>
<pre><code class="javascript"><span class="keyword">var</span> $address, $account, $NINo, $debitCard;

$address = requestAppartment(job);

$.when($job, $address).done(<span class="function"><span class="keyword">function</span>(<span class="params">job, address</span>)</span>{
  $account = requestBankAccount(job, address);
  $NINo = requestNINo(job, address);

  $account.done(<span class="function"><span class="keyword">function</span>(<span class="params">account</span>)</span>{
    $debitCard = requestDebitCard(account, address);
  });
});
</code></pre>
